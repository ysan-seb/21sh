/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   ft_wstruct.c                                       :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: ysan-seb <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2017/11/05 11:41:56 by ysan-seb          #+#    #+#             */
/*   Updated: 2017/11/05 11:41:59 by ysan-seb         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "ft_printf.h"

char	*ft_wstruct(wint_t c)
{
	char	*tab;

	if (!(tab = ft_strnew(4)))
		return (NULL);
	if (c > 0xffff && c <= 0x1fffff)
	{
		tab[0] = 30 << 3 | (c >> 18 & 7);
		tab[3] = 2 << 6 | (c & 63);
		c = c >> 6;
	}
	if (c > 0x7ff && c <= 0xffff)
	{
		tab[0] ? 0 : (tab[0] = 14 << 4 | (c >> 12 & 15));
		tab[2] = 2 << 6 | (c & 63);
		c = c >> 6;
	}
	if (c > 0x7f && c <= 0x7ff)
	{
		tab[0] ? 0 : (tab[0] = 6 << 5 | (c >> 6 & 31));
		tab[1] = 2 << 6 | (c & 63);
		c = c >> 6;
	}
	tab[0] ? 0 : (tab[0] = c);
	return (tab);
}
